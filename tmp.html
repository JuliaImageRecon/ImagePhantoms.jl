<h1 id="imagephantoms.jl">ImagePhantoms.jl</h1>
<p>https://github.com/JuliaImageRecon/ImagePhantoms.jl</p>
<p><a
href="https://github.com/JuliaImageRecon/ImagePhantoms.jl/actions"><img
src="https://github.com/JuliaImageRecon/ImagePhantoms.jl/workflows/CI/badge.svg"
alt="action status" /></a> <a
href="https://juliaci.github.io/NanosoldierReports/pkgeval_badges/I/ImagePhantoms.html"><img
src="https://juliaci.github.io/NanosoldierReports/pkgeval_badges/I/ImagePhantoms.svg"
alt="pkgeval status" /></a> <a
href="https://codecov.io/github/JuliaImageRecon/ImagePhantoms.jl?branch=main"><img
src="https://codecov.io/github/JuliaImageRecon/ImagePhantoms.jl/coverage.svg?branch=main"
alt="codecov" /></a> <a href="LICENSE"><img
src="http://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat"
alt="license" /></a> <a
href="https://JuliaImageRecon.github.io/ImagePhantoms.jl/stable"><img
src="https://img.shields.io/badge/docs-stable-blue.svg"
alt="docs-stable" /></a> <a
href="https://JuliaImageRecon.github.io/ImagePhantoms.jl/dev"><img
src="https://img.shields.io/badge/docs-dev-blue.svg"
alt="docs-dev" /></a> <a
href="https://github.com/invenia/BlueStyle"><img
src="https://img.shields.io/badge/code%20style-blue-4495d1.svg"
alt="code-style" /></a>
<img src="https://avatars.githubusercontent.com/u/86683720" alt="logo" width="150"/>
<img src="https://github.com/JuliaImageRecon/ImagePhantoms.jl/blob/main/docs/src/assets/logo.svg" alt="logo" width="150"/></p>
<p>This Julia language repo provides tools for working with
software-defined image phantoms like the Shepp-Logan phantom.</p>
<p>For each phantom shape, methods are available for computing samples
of its image (using <code>phantom</code>), its Radon transform (2D) or
X-ray line integrals (3D), (using <code>radon</code>), and its 2D or 3D
Fourier transform (using <code>spectrum</code>).</p>
<p>For explanations and examples see the documentation using the blue
“docs” links above.</p>
<h3 id="getting-started">Getting started</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">&quot;ImagePhantoms&quot;</span>)</span></code></pre></div>
<h3 id="example">Example</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ImagePhantoms</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>image <span class="op">=</span> <span class="fu">shepp_logan</span>(<span class="fl">256</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fu">shepp_logan</span>(<span class="fu">SheppLoganToft</span>())</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>sinogram <span class="op">=</span> <span class="fu">radon</span>(<span class="fu">LinRange</span>(<span class="op">-</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">101</span>), <span class="fu">deg2rad</span>.(<span class="fl">0</span><span class="op">:</span><span class="fl">180</span>), p) <span class="co"># 101 × 181</span></span></code></pre></div>
<h3 id="example-1">Example</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ImagePhantoms</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">MIRTjim</span>: jim</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots </span><span class="co"># @animate, gif</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">disk_phantom</span>(title<span class="op">::</span><span class="dt">String</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    (dx,dy) <span class="op">=</span> (<span class="fl">1</span>, <span class="fl">1</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    (M,N) <span class="op">=</span> (<span class="fl">2</span><span class="op">^</span><span class="fl">8</span>,<span class="fl">2</span><span class="op">^</span><span class="fl">8</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> (<span class="op">-</span>M<span class="op">÷</span><span class="fl">2</span><span class="op">:</span>M<span class="op">÷</span><span class="fl">2</span><span class="op">-</span><span class="fl">1</span>) <span class="op">*</span> dx</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> (<span class="op">-</span>N<span class="op">÷</span><span class="fl">2</span><span class="op">:</span>N<span class="op">÷</span><span class="fl">2</span><span class="op">-</span><span class="fl">1</span>) <span class="op">*</span> dy</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> <span class="fu">disk_phantom_params</span>( ; rhead <span class="op">=</span> () <span class="op">-&gt;</span> <span class="fu">rand</span>(<span class="fl">100</span><span class="op">:</span><span class="fl">105</span>))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    objects <span class="op">=</span> <span class="fu">ellipse</span>(params) <span class="co"># vector of Object2d{Ellipse}</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> <span class="fu">phantom</span>(x, y, objects) <span class="co"># sampled at all (x,y) pairs</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">jim</span>(x, y, img; title, clim<span class="op">=</span>(<span class="fl">0</span>,<span class="fl">1300</span>))</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>anim <span class="op">=</span> <span class="pp">@animate</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">disk_phantom</span>(<span class="st">&quot;Realization </span><span class="sc">$</span>i<span class="st">&quot;</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">gif</span>(anim, <span class="st">&quot;disk.gif&quot;</span>, fps <span class="op">=</span> <span class="fl">8</span>)</span></code></pre></div>
<figure>
<img
src="https://github.com/JuliaImageRecon/ImagePhantoms.jl/blob/gh-pages/dev/generated/examples/disk.gif"
alt="animated phantom gif" />
<figcaption aria-hidden="true">animated phantom gif</figcaption>
</figure>
<h3 id="philosophy">Philosophy</h3>
<p>Often “phantoms” are treated as digital images. Here, the shapes
(rectangles, gaussians, ellipses, etc.) are all defined
<em>analytically</em> as functions, as are their line integrals and
Fourier transforms. Then one can sample those analytical functions to
make digital images, sinograms, and spectra.</p>
<h3 id="parallel-mri-sense">Parallel MRI (SENSE)</h3>
<p>Most of the methods here are of general use for any imaging modality.
There are a few methods (<code>mri_smap_basis</code>,
<code>mri_smap_fit</code>, <code>mri_spectra</code>) that are specific
to simulating parallel MRI (multiple receive coils) based on the <a
href="http://doi.org/10.1109/TMI.2011.2174158">2012 paper by
Guerquin-Kern et al.</a>. See the <a
href="https://JuliaImageRecon.github.io/ImagePhantoms.jl/stable">documentation</a>
for details.</p>
<h3 id="documentation">Documentation</h3>
<p>For more examples with graphics, see the <a
href="https://JuliaImageRecon.github.io/ImagePhantoms.jl/stable">documentation</a>.</p>
<p>Currently the package supports the following 2D shapes:
ellipses/circles, rectangles/squares, gaussians, triangles, and the
following 3D shapes: ellipsoids/spheres, cuboids/cubes, gaussians,
cylinders.</p>
<h3 id="dependents">Dependents</h3>
<ul>
<li><a href="https://github.com/JeffFessler/MIRT.jl">Michigan Image
Reconstruction Toolbox (MIRT)</a></li>
<li><a
href="https://github.com/JuliaImageRecon/Sinograms.jl">Sinograms.jl</a></li>
<li><a
href="https://github.com/JuliaImageRecon/SPECTrecon.jl">SPECTrecon.jl</a></li>
<li>See <a
href="https://juliahub.com/ui/Search?q=ImagePhantoms&amp;type=packages">juliahub</a></li>
</ul>
<h3 id="related-packages">Related packages</h3>
<ul>
<li><a
href="https://github.com/JuliaArrays/AxisArrays.jl">AxisArrays.jl</a></li>
<li><a
href="https://github.com/JuliaImageRecon/ImageGeoms.jl">ImageGeoms.jl</a></li>
<li><a
href="https://github.com/JuliaImages/Images.jl">JuliaImages/Images.jl</a>
<code>shepp_logan</code></li>
<li><a
href="https://github.com/JuliaImages/TestImages.jl">TestImages.jl</a>:
<code>shepp_logan</code></li>
<li><a
href="https://github.com/cncastillo/KomaMRI.jl">KomaMRI.jl</a></li>
</ul>
<h3 id="compatibility">Compatibility</h3>
<p>Tested with Julia ≥ 1.6.</p>
<!-- URLs -->
